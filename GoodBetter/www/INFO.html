<html>
<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<link rel="stylesheet" type="text/css" href="css/Tab.css" />
	<link rel="stylesheet" type="text/css" href="css/INFO.css" />
	<link rel="stylesheet" type="text/css" href="css/Setting.css" />
	<link rel="stylesheet" type="text/css" href="css/PlantTalk.css" />
	<link rel="stylesheet" type="text/css" href="css/Record.css" />
	<link rel="stylesheet" href="css/RecordAddPage.css">

	<link rel="stylesheet" href="lib/onsen/css/onsenui.css">
	<link rel="stylesheet" href="thema/onsen-css-components.css">

	<script src="lib/onsen/js/angular/angular.js"></script>
	<script src="lib/onsen/js/onsenui.js"></script>
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="js/PlantTalk.js"></script>
	<script type="text/javascript" src="cordova.js"></script>
	<script>
		ons.bootstrap();
	</script>

</head>
</head>
<body onload="onLoad()">

<div class="tab-bar-sp tab-bar--top-sp tab-bar--top-border-sp" style="z-index:1000;">
	<label class="tab-bar__item-sp tab-bar--top-border__item-sp">
		<!--<input type="radio" name="top-tab-bar-b">-->
		<button class="button--cta-sp" id="QR" class="tab-bar__button-sp tab-bar--top-border__button-sp">
			QR Scan
		</button>
	</label>

	<label class="tab-bar__item-sp tab-bar--top-border__item-sp"onclick="INFOClick();">
		<input type="radio" name="top-tab-bar-b-sp" checked="checked" >
		<button class="tab-bar__button-sp tab-bar--top-border__button-sp">
			INFO
		</button>
	</label>

	<label class="tab-bar__item-sp tab-bar--top-border__item-sp" onclick="RecordClick();">
		<input type="radio" name="top-tab-bar-b-sp">
		<button class="tab-bar__button-sp tab-bar--top-border__button-sp">
			Record
		</button>
	</label>

	<label class="tab-bar__item-sp tab-bar--top-border__item-sp" onclick="TalkClick();">
		<input type="radio" name="top-tab-bar-b-sp">
		<button class="tab-bar__button-sp tab-bar--top-border__button-sp">
			Talk
		</button>
	</label>

	<label class="tab-bar__item-sp tab-bar--top-border__item-sp" onclick="SetClick();">
		<input type="radio" name="top-tab-bar-b-sp" >
		<button class="tab-bar__button-sp tab-bar--top-border__button-sp">
			Setting
		</button>
	</label>
</div>

<br><br><br>
<div id="INFOPage">

	<div class="profile-card">

		<img id="pla_image" src="img/ImageLoading.png" class="profile-image-sp">
		<div class="profile-name" id="pla_name">매화나무</div>

	</div>
	<br>

	<ons-list modifier="inset" style="margin-top: 10px">
		<ons-list-item modifier="tappable" id="pla_location">
			<ons-icon icon="fa-map-marker"></ons-icon>
			불러오는중....
		</ons-list-item>
	</ons-list>

	<br>
	<ons-list modifier="inset" style="margin-top: 10px">
		<ons-list-item modifier="tappable" id="pla_content">
			불러오는중....
		</ons-list-item>
	</ons-list>
	<br>
</div>

<div id="RecordPage" style="display:none">
	<button class="button-sp" id="addButton">+Add</button>
	<!-- 임시 date -->
	<div id="selectGroup">
	</div>

	<br><br>
	<div class="settings-header">List</div>
	<br>
	<div id="RecordList">
		<img style="width: 100%;" src="img/Loading.png" />
	</div>
</div>

<div id="TalkPage" style="display: none">
	<div class="Submit-Class" id="SubmitButton" >
		<button class="Submit Submit--large" id="questionButton" onclick="QuestionClick()">질문하기</button>
	</div>
</div>

<div id="SettingPage" style="display:none">
	<ons-row class="profile-wrapper">
		<ons-col width="115px" class="profile-image-wrapper">
			<img src="img/profile.png" class="profile-image">
		</ons-col>

		<ons-col>
			<div class="profile-name">Good&Better</div>
			<div class="profile-email">gbr0822@daum.net</div>
		</ons-col>

	</ons-row>
	<br>

	<ons-list modifier="inset" class="settings-list">
		<ons-list-item modifier="chevron" onclick="window.open('http://www.goodandbetter.co.kr/','_system');">
			HomePage
		</ons-list-item>

		<ons-list-item modifier="chevron" onclick="document.getElementById('AppInfoDialog').style.display = 'block'">
			App Information
		</ons-list-item>
	</ons-list>
	<br>

	<ons-list modifier="inset" class="settings-list">
		<ons-list-item modifier="tappable">
			<ons-icon icon="ion-log-out" style="opacity: 0.8"></ons-icon>
			Sign out
		</ons-list-item>
	</ons-list>
	
	<div id = "AppInfoDialog" style="display:none">
	<div class="alert-dialog-mask"></div>
	<div class="alert-dialog">	
		<div class="alert-dialog-content">
			App Information<br><br>
			Version : 0.1.0 Beta<br>
		</div>

		<div class="alert-dialog-footer">
			<button class="alert-dialog-button alert-dialog-button--primal" onclick="document.getElementById('AppInfoDialog').style.display = 'none'">OK</button>
		</div>
	</div>
	</div>
</div>
<script>
	function onLoad() {
		document.addEventListener("deviceready", onDeviceReady(), false);
	}
	function onDeviceReady() {
		var s = window.localStorage.getItem("cur_plant");
		var plant = JSON.parse(s);
		var url = "http://goodandbetter.cafe24.com";
		document.getElementById("pla_name").innerHTML = plant.PLA_Name;
		document.getElementById("pla_location").innerHTML = "<ons-icon icon=\"fa-map-marker\"></ons-icon> "+plant.PLA_Location;
		document.getElementById("pla_content").innerHTML = plant.PLA_Content;
		document.getElementById("pla_image").src = url+plant.PLA_Image;
		
		//체크리스트에 select bar를 생성
		makeSelect();
	}
	
	function makeSelect(){
		var html="";
		var tDay = new Date();
		var tMonth = tDay.getMonth()+1;
	
		html += "<section class=\"container\">";
		html += "<div class=\"dropdown\">";
		html += "<select name=\"YearSelect\" id=\"YearSelect\" class=\"dropdown-select\">";
		for(var i = tDay.getFullYear(); i >= 2014; i--){
			html += "<option value=\"" + i + "\">" + i + "</option>";
		}
		html += "</select>";
		html += "</div>";
		html += "<div class=\"dropdown\">";
		html += "<select name=\"MonthSelect\" id=\"MonthSelect\" class=\"dropdown-select\">";
		for(var i = 1; i < 13; i++){
			if(i == tMonth){
				html += "<option value=\"" + i + "\" selected=\"selected\">" + i + "</option>";
			}
			else{
				html += "<option value=\"" + i + "\">" + i + "</option>";
			}
		}
		html += "</select>";
		html += "</div>";
		html += "<button class=\"Refresh\" onclick=\"RefreshRecord()\">Refresh</button>";
		html += "</section>";
	
		document.getElementById("selectGroup").innerHTML=html;
	}
	
	function RefreshRecord(){
		var YearSelect = document.getElementById("YearSelect");
		var target_Year = YearSelect.options[YearSelect.selectedIndex].value;
		var MonthSelect = document.getElementById("MonthSelect");
		var target_Month = MonthSelect.options[MonthSelect.selectedIndex].value;
		
		var cur_plant = window.localStorage.getItem("cur_plant");
		var plant = JSON.parse(cur_plant);
		
		RecordListLoad(plant.PLA_Code, target_Year, target_Month);
	}
</script>
<script type="text/javascript" src="js/Tab.js"></script>
</body>
</html>